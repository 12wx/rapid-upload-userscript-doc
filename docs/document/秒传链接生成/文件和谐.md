# 文件和谐

生成秒传时提示如下弹窗, 或者下载文件时提示 包含违规信息, 即文件被和谐, 文件被和谐后没有任何补救方法 (若为压缩包文件, 可尝试使用 在线解压 功能获取部分可下载的文件)

文件被和谐 1:

![图例1](https://pic.rmb.bdstatic.com/bjh/ca690a39f6668dcaa38b0a01ddf78e20.png)
![图例2](https://pic.rmb.bdstatic.com/bjh/95b6be9e217d7270fb34076cc0fa6695.png)

文件被和谐 2:

![图例3](https://pic.rmb.bdstatic.com/bjh/3c182fdbccab1eec22ebc9ee91a40573.png)

## 预防方法

1. 使用 **双层压缩**, 可规避在线解压导致的和谐, 详见 文件压缩方法 章节
2. 不使用 "分享链接" 分享文件, 可一定程度上规避举报导致的和谐(不开分享链接就没有文件举报按钮), 但不排除其他人使用秒传转存文件后再开分享链接.

关于文件和谐的详细说明文档: [防和谐相关](/rapid-upload-userscript-doc/file-protect)

## 文件压缩方法

原压缩方法: 固实压缩+加密文件名 已无法防止在线解压, 也无法再防和谐, 目前有效方法请参考下方的 "**双层压缩**".

### 双层压缩

使用任意压缩格式将原压缩包再压缩一次, 经过测试验证可效防和谐, 双层压缩的压缩包在线解压后只有内层压缩包会被和谐, 而外层压缩包**不会被和谐**(验证过程见下文).

PS: 提供一个一键批量双层压缩的工具 (使用秒传转存):

```plain :no-line-numbers
f2c3e6a533c9fc4e78293d082bbd5274#9804e9c75762a21f971ad8e9bc5ed576#15352276#auto_double_zip 批量双层压缩工具 v1.0.1.zip
```

\*工具源码: [项目主页](https://github.com/mengzonefire/auto_double_zip)

双压防和谐的对照验证过程:

1 组: 直接上传已和谐的视频文件 -> 文件和谐

2 组: 将视频文件压缩为 zip(无加密) -> 上传 -> 分享 -> 在线解压 -> 压缩包被和谐

3 组: 将 2 组的 zip 文件再压缩一次(无加密 zip) -> 上传 -> 分享 -> 在线解压 -> 解压出来的内层 zip 被和谐, 但原压缩包未和谐.

\*测试时间 2021.6.7, 使用度盘 PC 客户端测试

综上可知双层压缩(任意压缩格式,甚至无加密的 zip)可有效防止在线解压导致的文件和谐, 但手动举报导致的和谐应该还是无解.
